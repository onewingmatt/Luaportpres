<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>President Card Game</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>President Card Game</h1>
            <span class="debug-badge">DEBUG READY</span>
        </div>
        
        <div id="setupPhase">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('create')">Create New Game</button>

<div style="margin-top:1rem;padding:0.75rem;border:1px solid #666;border-radius:4px;">
  <div style="font-weight:600;margin-bottom:0.5rem;">Pre-Game Options</div>
  <label style="display:block;margin:0.5rem 0;"><input type="checkbox" id="opt-2s" /> 2s Wild</label>
  <label style="display:block;margin:0.5rem 0;"><input type="checkbox" id="opt-black3" /> Black 3s Wild</label>
  <label style="display:block;margin:0.5rem 0;"><input type="checkbox" id="opt-jd" /> JD Wild</label>
</div>
                <button class="tab-btn" onclick="switchTab('join')">Join Existing Game</button>
            </div>
            
            <div id="create" class="tab-content active">
                <div class="form-group">
                    <label>Your Name</label>
                    <input type="text" id="playerName" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label>Number of CPUs</label>
                    <div class="cpu-options">
                        <div class="cpu-option selected" data-cpus="1" onclick="selectCPU(1)">1 CPU</div>
                        <div class="cpu-option" data-cpus="2" onclick="selectCPU(2)">2 CPUs</div>
                        <div class="cpu-option" data-cpus="3" onclick="selectCPU(3)">3 CPUs</div>
                    </div>
                </div>
                <button class="btn-primary" onclick="createGame()">Create Game</button>
            </div>
            
            <div id="join" class="tab-content">
                <div class="form-group">
                    <label>Your Name</label>
                    <input type="text" id="joinPlayerName" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label>Table ID</label>
                    <input type="text" id="tableId" placeholder="Enter table ID">
                </div>
                <button class="btn-primary" onclick="joinGame()">Join Game</button>
            </div>
        </div>
        
        <div id="gameArea">
            <div class="game-container">
                <div class="main-game">
                    <div id="errorMsg"></div>
                    <div class="status-area">
                        <div class="status-row">
                            <div class="status-item">
                                <div class="status-label">Current Player</div>
                                <div id="currentPlayer" class="status-value">-</div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">Will Lead if Pass</div>
                                <div id="leadPlayerDisplay" class="status-value lead">-</div>
                            </div>
                        </div>
                        <div class="status-row">
                            <div class="status-item">
                                <div class="status-label">Is Your Turn</div>
                                <div id="isYourTurnDisplay" class="status-value">NO</div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">Round</div>
                                <div id="roundNum" class="status-value">1</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-title">Table</div>
                    <div id="tableCards"></div>
                    
                    <div class="section-title">Players</div>
                    <div id="playersList"></div>
                    
                    <div class="section-title">Your Hand (Click to select)</div>
                    <div id="hand"></div>
                    
                    <div class="controls">
                        <button id="playBtn" class="btn-play" onclick="playCards()">Play Selected</button>
                        <button id="clearBtn" class="btn-clear" onclick="clearSelection()">Clear</button>
                        <button id="passBtn" class="btn-pass" onclick="passCards()">Pass</button>
                    </div>
                </div>
                
                <div class="sidebar">
                    <div class="sidebar-card">
                        <div class="sidebar-title">Game ID</div>
                        <div class="sidebar-value" id="gameId">-</div>
                    </div>
                    
                    <div class="sidebar-card">
                        <div class="sidebar-title">Debug Log</div>
                        <div id="debugLog"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="exchangePhase">
            <h2>Card Exchange Phase</h2>
            <div class="exchange-role-display">Your Role: <span id="exchangeYourRole">-</span></div>
            <div class="exchange-msg" id="exchangeMsg"></div>
            <div id="exchangeDisplay"></div>
            <div class="exchange-controls">
                <button class="btn-submit" id="exchangeSubmitBtn" onclick="submitExchange()">Submit</button>
            </div>
        </div>
    </div>
    
    

    <!-- OPTIONS PANEL -->
    <button id="toggleOptionsBtn" style="position: fixed; top: 10px; right: 10px; z-index: 101; padding: 10px 15px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 14px;">âš™ Options</button>

    <div id="optionsPanel" style="position: fixed; right: 10px; top: 60px; background: #f0f0f0; border: 2px solid #333; padding: 15px; border-radius: 8px; max-width: 220px; font-size: 12px; z-index: 100; display: none; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h3 style="margin: 0; font-size: 14px;">Options</h3>
            <button id="closeOptionsBtn" style="background: none; border: none; font-size: 18px; cursor: pointer; padding: 0;">Ã—</button>
        </div>
        <label style="display: flex; align-items: center; margin-bottom: 8px;"><input type="checkbox" id="opt_twos_wild" checked style="margin-right: 6px;"><strong>2s Wild</strong></label>
        <label style="display: flex; align-items: center; margin-bottom: 8px;"><input type="checkbox" id="opt_black3s_wild" checked style="margin-right: 6px;"><strong>Black 3s Wild</strong></label>
        <label style="display: flex; align-items: center; margin-bottom: 8px;"><input type="checkbox" id="opt_jd_wild" checked style="margin-right: 6px;"><strong>JD Wild</strong></label>
        <label style="display: flex; align-items: center; margin-bottom: 12px; border-top: 1px solid #ccc; padding-top: 8px;"><input type="checkbox" id="opt_sound_enabled" checked style="margin-right: 6px;"><strong>ðŸ”Š Turn Sound</strong></label>
        <button id="testSoundBtn" style="width: 100%; padding: 6px; margin-bottom: 8px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 11px;">ðŸ”Š Test Sound</button>
        <button id="restartBtn" style="width: 100%; padding: 10px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: bold;">ðŸ”„ Restart Hand</button>
    </div>

    <!-- PLAY LOG (Console Style) -->
    <div id="playLogContainer" style="position: fixed; right: 10px; bottom: 10px; max-width: 400px; height: 300px; z-index: 99; background: #1e1e1e; border: 2px solid #333; border-radius: 8px; display: flex; flex-direction: column; font-family: 'Courier New', monospace; font-size: 12px; color: #00ff00; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
        <div id="playLogHeader" style="background: #2d2d2d; color: #00ff00; padding: 10px; cursor: pointer; border-bottom: 1px solid #444; display: flex; justify-content: space-between; align-items: center; font-weight: bold; border-radius: 6px 6px 0 0;">
            <span>â–¶ Play Log</span>
            <span id="playLogToggle">â–¼</span>
        </div>
        <div id="playLogContent" style="flex: 1; overflow-y: auto; background: #1e1e1e; padding: 10px; border-radius: 0 0 6px 6px;">
            <div id="playLogEntries" style="display: flex; flex-direction: column-reverse;">
                <div style="color: #888; margin-bottom: 5px;">>> Game started...</div>
            </div>
        </div>
    </div>

    

<script>
(function(){
  if(!window.socket) return;
  window.socket.on('game_created', function(){
    try {
      var opts = {
        wild_twos: (document.getElementById('opt-2s') && document.getElementById('opt-2s').checked) || false,
        wild_black3: (document.getElementById('opt-black3') && document.getElementById('opt-black3').checked) || false,
        wild_jd: (document.getElementById('opt-jd') && document.getElementById('opt-jd').checked) || false
      };
      window.socket.emit('set_options', opts);
    } catch(e) { console.error('options:', e); }
  });
})();
</script>

</body>
</html>
